(self["webpackChunktypesense_dashboard"]=self["webpackChunktypesense_dashboard"]||[]).push([[376],{25816:(e,l,t)=>{"use strict";t.d(l,{Z:()=>f});var a=t(83673);const o=(0,a.HX)("data-v-46f34a38");(0,a.dD)("data-v-46f34a38");const n={ref:"editorWrapper",class:"col relative-position overflow-hidden editorWrapper"},d={ref:"editorElement",class:"absolute-top-left"};(0,a.Cn)();const i=o(((e,l,t,o,i,s)=>{const r=(0,a.up)("q-resize-observer");return(0,a.wg)(),(0,a.j4)("div",n,[(0,a.Wm)(r,{onResize:e.onResize},null,8,["onResize"]),(0,a.Wm)("div",d,null,512)],512)}));var s=t(55725),r=t(61959);const u=(0,a.aZ)({name:"MonacoEditor",props:{modelValue:{type:String,default:""},options:{type:Object,default:()=>({})}},emits:["update:modelValue"],setup(e,{emit:l}){const t=(0,r.iH)(null),o=(0,r.iH)(null);let n;return(0,a.bv)((()=>{n=s.editor.create(t.value,Object.assign({value:e.modelValue,language:"json",theme:"vs-dark",minimap:{enabled:!1}},e.options)),n.onDidChangeModelContent((()=>{l("update:modelValue",null===n||void 0===n?void 0:n.getValue())}))})),(0,a.Ah)((()=>{null===n||void 0===n||n.dispose()})),(0,a.YP)((()=>e.modelValue),(()=>{var l;e.modelValue!==(null===n||void 0===n?void 0:n.getValue())&&(null===(l=null===n||void 0===n?void 0:n.getModel())||void 0===l||l.setValue(e.modelValue),null===n||void 0===n||n.setScrollPosition({scrollTop:0}))})),{editorElement:t,editorWrapper:o,onResize(){null===n||void 0===n||n.layout({height:0,width:0}),window.setTimeout((()=>{null===n||void 0===n||n.layout({height:o.value.offsetHeight,width:o.value.offsetWidth})}))}}}});var m=t(15151),c=t(7518),p=t.n(c);u.render=i,u.__scopeId="data-v-46f34a38";const f=u;p()(u,"components",{QResizeObserver:m.Z})},18376:(e,l,t)=>{"use strict";t.r(l),t.d(l,{default:()=>G});var a=t(83673);function o(e,l,t,o,n,d){const i=(0,a.up)("collection-create"),s=(0,a.up)("q-icon"),r=(0,a.up)("q-input"),u=(0,a.up)("collection-list-item"),m=(0,a.up)("q-table"),c=(0,a.up)("q-page");return(0,a.wg)(),(0,a.j4)(c,{padding:""},{default:(0,a.w5)((()=>[(0,a.Wm)(i),(0,a.Wm)(m,{grid:"","grid-header":"",filter:e.filter,columns:e.columns,rows:e.$store.state.node.data.collections,"row-key":"name",pagination:{rowsPerPage:0,sortBy:"name"}},{"top-right":(0,a.w5)((()=>[(0,a.Wm)(r,{borderless:"",dense:"",debounce:"300",modelValue:e.filter,"onUpdate:modelValue":l[1]||(l[1]=l=>e.filter=l),placeholder:"Search"},{append:(0,a.w5)((()=>[(0,a.Wm)(s,{name:"search"})])),_:1},8,["modelValue"])])),item:(0,a.w5)((e=>[(0,a.Wm)(u,{collection:e.row},null,8,["collection"])])),_:1},8,["filter","columns","rows"])])),_:1})}var n=t(62323);const d={class:"q-pa-xs col-xs-12 col-sm-6 col-md-4 col-lg-3"},i={class:"text-h4"},s=(0,a.Uk)(" Nb documents "),r=(0,a.Uk)(" Schema fields "),u=(0,a.Uk)(" Nb memory shards "),m=(0,a.Uk)(" Created at "),c=(0,a.Uk)("schema"),p=(0,a.Uk)("import"),f=(0,a.Uk)("export");function h(e,l,t,o,h,w){const b=(0,a.up)("q-item-label"),g=(0,a.up)("q-item-section"),W=(0,a.up)("q-item"),_=(0,a.up)("q-list"),v=(0,a.up)("q-card-section"),q=(0,a.up)("q-separator"),V=(0,a.up)("q-btn"),y=(0,a.up)("q-space"),C=(0,a.up)("q-card-actions"),Z=(0,a.up)("q-card");return(0,a.wg)(),(0,a.j4)("div",d,[(0,a.Wm)(Z,null,{default:(0,a.w5)((()=>[(0,a.Wm)(v,null,{default:(0,a.w5)((()=>[(0,a.Wm)("div",i,(0,n.zw)(e.collection.name),1),(0,a.Wm)(_,{dense:""},{default:(0,a.w5)((()=>[(0,a.Wm)(W,{to:`/collection/${e.collection.name}/search`},{default:(0,a.w5)((()=>[(0,a.Wm)(g,null,{default:(0,a.w5)((()=>[(0,a.Wm)(b,{caption:""},{default:(0,a.w5)((()=>[s])),_:1})])),_:1}),(0,a.Wm)(g,{side:""},{default:(0,a.w5)((()=>[(0,a.Wm)(b,null,{default:(0,a.w5)((()=>[(0,a.Uk)((0,n.zw)(e.collection.num_documents),1)])),_:1})])),_:1})])),_:1},8,["to"]),(0,a.Wm)(W,{to:`/collection/${e.collection.name}/schema`},{default:(0,a.w5)((()=>[(0,a.Wm)(g,null,{default:(0,a.w5)((()=>[(0,a.Wm)(b,{caption:""},{default:(0,a.w5)((()=>[r])),_:1})])),_:1}),(0,a.Wm)(g,{side:""},{default:(0,a.w5)((()=>[(0,a.Wm)(b,null,{default:(0,a.w5)((()=>[(0,a.Uk)((0,n.zw)(e.collection.fields.length),1)])),_:1})])),_:1})])),_:1},8,["to"]),(0,a.Wm)(W,null,{default:(0,a.w5)((()=>[(0,a.Wm)(g,null,{default:(0,a.w5)((()=>[(0,a.Wm)(b,{caption:""},{default:(0,a.w5)((()=>[u])),_:1})])),_:1}),(0,a.Wm)(g,{side:""},{default:(0,a.w5)((()=>[(0,a.Wm)(b,null,{default:(0,a.w5)((()=>[(0,a.Uk)((0,n.zw)(e.collection.num_memory_shards),1)])),_:1})])),_:1})])),_:1}),(0,a.Wm)(W,null,{default:(0,a.w5)((()=>[(0,a.Wm)(g,null,{default:(0,a.w5)((()=>[(0,a.Wm)(b,{caption:""},{default:(0,a.w5)((()=>[m])),_:1})])),_:1}),(0,a.Wm)(g,{side:""},{default:(0,a.w5)((()=>[(0,a.Wm)(b,null,{default:(0,a.w5)((()=>[(0,a.Uk)((0,n.zw)(new Date(1e3*e.collection.created_at).toLocaleString()),1)])),_:1})])),_:1})])),_:1})])),_:1})])),_:1}),(0,a.Wm)(q),(0,a.Wm)(C,{align:"right",class:"bg-grey-2"},{default:(0,a.w5)((()=>[(0,a.Wm)(V,{flat:"",to:`/collection/${e.collection.name}/schema`},{default:(0,a.w5)((()=>[c])),_:1},8,["to"]),(0,a.Wm)(y),(0,a.Wm)(V,{flat:"",to:`/collection/${e.collection.name}/document`},{default:(0,a.w5)((()=>[p])),_:1},8,["to"]),(0,a.Wm)(V,{flat:"",onClick:l[1]||(l[1]=l=>e.exportCollection())},{default:(0,a.w5)((()=>[f])),_:1})])),_:1})])),_:1})])}var w=function(e,l,t,a){function o(e){return e instanceof t?e:new t((function(l){l(e)}))}return new(t||(t=Promise))((function(t,n){function d(e){try{s(a.next(e))}catch(l){n(l)}}function i(e){try{s(a["throw"](e))}catch(l){n(l)}}function s(e){e.done?t(e.value):o(e.value).then(d,i)}s((a=a.apply(e,l||[])).next())}))};const b=(0,a.aZ)({name:"Collection",props:["collection"],methods:{exportCollection(){return w(this,void 0,void 0,(function*(){this.$q.loading.show({message:"Downloading. Please wait...",boxClass:"bg-grey-2 text-grey-9",spinnerColor:"primary"}),yield this.$store.dispatch("node/exportDocuments",this.collection.name).then((()=>this.$q.loading.hide())).catch((()=>{this.$q.loading.hide(),this.$q.dialog({title:"Export failed",message:"Try desktop version of the app."})}))}))}}});var g=t(10151),W=t(25589),_=t(27011),v=t(83414),q=t(52035),V=t(2350),y=t(65869),C=t(99367),Z=t(48240),k=t(62025),U=t(7518),Q=t.n(U);b.render=h;const x=b;Q()(b,"components",{QCard:g.Z,QCardSection:W.Z,QList:_.Z,QItem:v.Z,QItemSection:q.Z,QItemLabel:V.Z,QSeparator:y.Z,QCardActions:C.Z,QBtn:Z.Z,QSpace:k.Z});const j={class:"row q-gutter-md"},S=(0,a.Wm)("div",{class:"text-subtitle1 q-pt-md"},"Fields",-1),z=(0,a.Uk)("Remove Field"),F=(0,a.Uk)("Add field"),$=(0,a.Uk)("Create Collection");function E(e,l,t,o,d,i){const s=(0,a.up)("q-tab"),r=(0,a.up)("q-tabs"),u=(0,a.up)("q-separator"),m=(0,a.up)("q-input"),c=(0,a.up)("q-select"),p=(0,a.up)("q-card-section"),f=(0,a.up)("q-checkbox"),h=(0,a.up)("q-btn"),w=(0,a.up)("q-card-actions"),b=(0,a.up)("q-card"),g=(0,a.up)("q-tab-panel"),W=(0,a.up)("monaco-editor"),_=(0,a.up)("q-banner"),v=(0,a.up)("q-tab-panels"),q=(0,a.up)("q-expansion-item"),V=(0,a.up)("q-list");return(0,a.wg)(),(0,a.j4)(V,{bordered:"",class:"rounded-borders"},{default:(0,a.w5)((()=>[(0,a.Wm)(q,{"expand-separator":"",icon:"post_add",label:"Add Collection","header-class":"bg-primary text-white"},{default:(0,a.w5)((()=>[(0,a.Wm)(b,null,{default:(0,a.w5)((()=>[(0,a.Wm)(r,{modelValue:e.tab,"onUpdate:modelValue":l[1]||(l[1]=l=>e.tab=l),dense:"",class:"text-grey","active-color":"primary","indicator-color":"primary",align:"justify","narrow-indicator":""},{default:(0,a.w5)((()=>[(0,a.Wm)(s,{name:"form",label:"Form Mode"}),(0,a.Wm)(s,{name:"json",label:"JSON Mode"})])),_:1},8,["modelValue"]),(0,a.Wm)(u),(0,a.Wm)(v,{modelValue:e.tab,"onUpdate:modelValue":l[5]||(l[5]=l=>e.tab=l),animated:"",style:{height:"60vh"},class:"bg-grey-3"},{default:(0,a.w5)((()=>[(0,a.Wm)(g,{name:"form"},{default:(0,a.w5)((()=>[(0,a.Wm)(p,null,{default:(0,a.w5)((()=>[(0,a.Wm)("div",j,[(0,a.Wm)(m,{class:"col",filled:"","bg-color":"white",dense:"",modelValue:e.schema.name,"onUpdate:modelValue":l[2]||(l[2]=l=>e.schema.name=l),label:"Collection Name",placeholder:"books",rules:[e=>!!e||"Field is required"]},null,8,["modelValue","rules"]),(0,a.Wm)(c,{filled:"","bg-color":"white",class:"col",dense:"",modelValue:e.schema.default_sorting_field,"onUpdate:modelValue":l[3]||(l[3]=l=>e.schema.default_sorting_field=l),options:e.availableSortFields,label:"Default sort field optional, but must be int32 or float"},null,8,["modelValue","options"])]),S,((0,a.wg)(!0),(0,a.j4)(a.HY,null,(0,a.Ko)(e.schema.fields,((l,t)=>((0,a.wg)(),(0,a.j4)(b,{flat:"",bordered:"",key:t,class:"bg-grey-1 q-mb-md"},{default:(0,a.w5)((()=>[(0,a.Wm)(p,{class:"row q-gutter-md"},{default:(0,a.w5)((()=>[(0,a.Wm)(m,{class:"col",dense:"",filled:"","bg-color":"white",modelValue:l.name,"onUpdate:modelValue":e=>l.name=e,label:"Field Name",placeholder:"title",rules:[e=>!!e||"Field is required"]},null,8,["modelValue","onUpdate:modelValue","rules"]),(0,a.Wm)(c,{class:"col",dense:"",filled:"","bg-color":"white",modelValue:l.type,"onUpdate:modelValue":e=>l.type=e,label:"type",options:e.types,rules:[e=>!!e||"Field is required"]},null,8,["modelValue","onUpdate:modelValue","options","rules"])])),_:2},1024),(0,a.Wm)(u),(0,a.Wm)(w,{align:"between"},{default:(0,a.w5)((()=>[(0,a.Wm)("div",null,[(0,a.Wm)(f,{modelValue:l.optional,"onUpdate:modelValue":e=>l.optional=e,label:"optional"},null,8,["modelValue","onUpdate:modelValue"]),(0,a.Wm)(f,{modelValue:l.facet,"onUpdate:modelValue":e=>l.facet=e,label:"facet"},null,8,["modelValue","onUpdate:modelValue"]),(0,a.Wm)(f,{modelValue:l.index,"onUpdate:modelValue":e=>l.index=e,label:"index"},null,8,["modelValue","onUpdate:modelValue"])]),(0,a.Wm)(h,{size:"md",padding:"sm lg",unelevated:"",onClick:t=>e.removeField(l)},{default:(0,a.w5)((()=>[z])),_:2},1032,["onClick"])])),_:2},1024)])),_:2},1024)))),128))])),_:1})])),_:1}),(0,a.Wm)(g,{name:"json",class:"q-pa-none"},{default:(0,a.w5)((()=>[(0,a.Wm)(W,{modelValue:e.schemaJson,"onUpdate:modelValue":l[4]||(l[4]=l=>e.schemaJson=l),style:{height:"60vh"}},null,8,["modelValue"]),e.jsonError?((0,a.wg)(),(0,a.j4)(_,{key:0,"inline-actions":"",class:"text-white bg-red"},{default:(0,a.w5)((()=>[(0,a.Uk)(" Invalid Format: "+(0,n.zw)(e.jsonError),1)])),_:1})):(0,a.kq)("",!0)])),_:1})])),_:1},8,["modelValue"]),(0,a.Wm)(u),(0,a.Wm)(w,{align:"between",class:"bg-primary"},{default:(0,a.w5)((()=>[(0,a.Wm)(h,{size:"md",padding:"sm lg",unelevated:"",color:"primary",onClick:l[6]||(l[6]=l=>e.addField())},{default:(0,a.w5)((()=>[F])),_:1}),(0,a.Wm)(h,{size:"md",padding:"sm lg",unelevated:"",color:"primary",onClick:l[7]||(l[7]=l=>e.createCollection())},{default:(0,a.w5)((()=>[$])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})}var I=t(25816);const N=(0,a.aZ)({components:{MonacoEditor:I.Z},name:"CollectionCreate",data(){return{tab:"form",schema:{name:"",fields:[],default_sorting_field:""},types:["string","int32","int64","float","bool","string[]","int32[]","int64[]","float[]","bool[]","geopoint","auto"],jsonError:null}},mounted(){this.addField()},computed:{availableSortFields(){const e=this.schema.fields.filter((e=>["int32","float"].includes(e.type)));return[""].concat(e.map((e=>e.name)))},schemaJson:{get(){return JSON.stringify(this.schema,null,2)},set(e){try{this.schema=JSON.parse(e),this.jsonError=null}catch(l){this.jsonError=l.message}}}},methods:{addField(){this.schema.fields.push({name:"",type:"string",optional:!1,facet:!1,index:!0})},removeField(e){this.schema.fields.splice(this.schema.fields.indexOf(e),1)},createCollection(){this.$store.dispatch("node/createCollection",this.schema)}}});var P=t(64615),T=t(57547),O=t(3269),D=t(5906),J=t(86602),M=t(34842),R=t(97637),A=t(65735),H=t(15607);N.render=E;const L=N;Q()(N,"components",{QList:_.Z,QExpansionItem:P.Z,QCard:g.Z,QTabs:T.Z,QTab:O.Z,QSeparator:y.Z,QTabPanels:D.Z,QTabPanel:J.Z,QCardSection:W.Z,QInput:M.Z,QSelect:R.Z,QCardActions:C.Z,QCheckbox:A.Z,QBtn:Z.Z,QBanner:H.Z});const B=(0,a.aZ)({components:{CollectionListItem:x,CollectionCreate:L},name:"Collections",data(){return{filter:"",columns:[{name:"name",required:!0,label:"Name",field:"name",sortable:!0},{name:"num_documents",required:!0,label:"Nb documents",field:"num_documents",sortable:!0},{name:"schema_fields",required:!0,label:"Schema fields",field:e=>e.fields.length||0,sortable:!0},{name:"num_memory_shards",required:!0,label:"Nb memory shards",field:"num_memory_shards",sortable:!0},{name:"created_at",required:!0,label:"Created at",field:"created_at",sortable:!0}]}},mounted(){this.$store.dispatch("node/getCollections")}});var Y=t(24379),K=t(83243),X=t(24554);B.render=o;const G=B;Q()(B,"components",{QPage:Y.Z,QTable:K.Z,QInput:M.Z,QIcon:X.Z})}}]);